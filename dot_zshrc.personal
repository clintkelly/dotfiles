# -------------------------------------------------------------
# Powerlevel10k instant prompt
# -------------------------------------------------------------
if [[ -r ~/.p10k.zsh ]]; then
  source ~/.p10k.zsh
fi

# Exit early for non-interactive shells
case $- in
  *i*) ;;
  *) return ;;
esac

# -------------------------------------------------------------
# macOS Homebrew Setup
# -------------------------------------------------------------
if [[ -x /opt/homebrew/bin/brew ]]; then
  eval "$(/opt/homebrew/bin/brew shellenv)"
elif [[ -x /usr/local/bin/brew ]]; then
  eval "$(/usr/local/bin/brew shellenv)"
fi

# -------------------------------------------------------------
# Oh My Zsh
# -------------------------------------------------------------
export ZSH="$HOME/.oh-my-zsh"
ZSH_THEME="powerlevel10k/powerlevel10k"
plugins=(
  git
  zsh-autosuggestions
  zsh-syntax-highlighting
)
source "$ZSH/oh-my-zsh.sh"

# -------------------------------------------------------------
# macOS Aliases
# -------------------------------------------------------------
alias o='open .'          # Open current directory in Finder
alias ls='ls -G'          # macOS uses BSD ls, `-G` for colors
alias ll='ls -lah'
alias la='ls -A'

# -------------------------------------------------------------
# History
# -------------------------------------------------------------
HISTFILE="$HOME/.zsh_history"
HISTSIZE=100000
SAVEHIST=$HISTSIZE
setopt HIST_IGNORE_DUPS
setopt SHARE_HISTORY

# -------------------------------------------------------------
# Local overrides
# -------------------------------------------------------------
[[ -f ~/.zshrc.personal ]] && source ~/.zshrc.personal



HISTFILE=~/.zsh_history
HISTSIZE=10000
SAVEHIST=10000

setopt APPEND_HISTORY # adds history
setopt INC_APPEND_HISTORY SHARE_HISTORY  # adds history incrementally and share it across sessions
setopt HIST_IGNORE_ALL_DUPS  # don't record dupes in history
setopt HIST_REDUCE_BLANKS

alias history='history 1'
alias h='history | tail -n 50'
alias c='clear'
alias rm='rm -i'
alias cp='cp -i'
alias mv='mv -i'
alias hg='history | grep '